---
import type { MatchData } from '../types/agenda'; 


interface Props {
    match: MatchData;
}

// Desestructuración de las props tipadas
const { match } = Astro.props; 

const victorianosData = { 
    name: "Victorianos", 
    logo: match.logo_victorianos
};

// 2. Datos del Rival
const rivalData = { 
    name: match.rival, 
    logo: match.logo_rival 
};

// 3. Asignación de Roles (Local vs. Visitante)
const localTeam = match.esLocal ? victorianosData : rivalData;
const awayTeam = match.esLocal ? rivalData : victorianosData;

// Información adicional
const ubicacion = match.ubicacion;
const hora = match.hora;
const tipoPartido = match.tipo;

---
<div class="w-full max-w-lg mx-auto p-4 md:p-6 bg-white border border-gray-200 rounded-xl shadow-xl hover:shadow-2xl transition duration-300 transform hover:scale-[1.01]">
    
    <div class="flex items-center justify-between w-full">

        <div class="flex flex-col items-center w-1/4 text-center">
            <img src={`/logos/${localTeam.logo}`} alt={localTeam.name} class="h-16 md:h-20 w-16 md:w-20 object-contain" />
            <p class="mt-2 text-sm font-semibold text-club-blue font-headline">{localTeam.name}</p>
            <span class="text-xs text-gray-500 mt-1">Local</span>
        </div>

        <div class="flex flex-col items-center w-1/2 text-center px-2">
            
            <p class="text-xs uppercase font-bold text-club-yellow bg-club-blue px-2 py-0.5 rounded-full mb-3 shadow-md">{tipoPartido}</p>
            
            {match.resultado ? (
                // Si hay resultado: Muestra el marcador final
                <div class="text-4xl font-headline font-extrabold text-gray-800">
                    {match.esLocal ? match.resultado.victorianos : match.resultado.rival} - {match.esLocal ? match.resultado.rival : match.resultado.victorianos}
                </div>
            ) : (
                // Si no hay resultado: Muestra la hora
                <div class="text-3xl font-headline font-bold text-gray-800">
                    {hora}
                </div>
            )}
            
            <p class="text-sm mt-3 text-gray-600 font-body">{match.fecha}</p>
            <p class="text-xs text-gray-500 font-body">{ubicacion}</p>
        </div>

        <div class="flex flex-col items-center w-1/4 text-center">
            <img src={`/logos/${awayTeam.logo}`} alt={awayTeam.name} class="h-16 md:h-20 w-16 md:w-20 object-contain" />
            <p class="mt-2 text-sm font-semibold text-gray-800 font-headline">{awayTeam.name}</p>
            <span class="text-xs text-gray-500 mt-1">Visitante</span>
        </div>
    </div>
    
    {(match.resultado && match.link_youtube) && (
        <div class="mt-4 pt-4 border-t border-gray-100 text-center">
            <a href={match.link_youtube} target="_blank" rel="noopener noreferrer" class="text-sm font-semibold text-red-600 hover:text-red-700 transition flex items-center justify-center">
                 Ver Partido Completo
            </a>
        </div>
    )}
</div>